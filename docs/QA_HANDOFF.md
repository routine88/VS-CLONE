# QA & Playtest Artifact Handoff

This guide explains how Nightfall QA and playtest coordinators can retrieve the
runtime artifacts generated by continuous integration, validate their integrity,
and launch the prototype for verification drills.

## 1. Retrieve Build Artifacts

1. Navigate to the repository's **Actions** tab and open the latest successful
   `CI` workflow run on the `main` branch. Push builds now publish two artifact
   bundles:
   - **`frame-bundles`** – JSONL payload exported from `game.mvp` via the
     `ns-runtime-artifacts checksum` tooling.
   - **`native-runtime`** – Zipped harness archive containing the `native`
     package plus a `BUILD_METADATA.json` descriptor.
2. Download both archives and store them in the handoff directory for the
   current playtest.

## 2. Verify Reproducible Builds

Run the checksum utility to confirm the downloaded files match the values
published by CI and that repeated exports remain deterministic:

```bash
# Extract checksum manifest produced during the CI run
unzip frame-bundles.zip

# Validate the exported frames
ns-runtime-artifacts verify artifacts/frame-bundles/nightfall-mvp.jsonl \
    --expected "$(cut -d' ' -f1 artifacts/frame-bundles/nightfall-mvp.sha256)"

# Confirm the native bundle is intact
ns-runtime-artifacts checksum artifacts/native/nightfall-runtime.zip
```

To compare a fresh local export against CI output, re-run the exporter with the
same seed and frame count:

```bash
ns-export-frames --seed 1337 --frames 300 --output local/nightfall-mvp.jsonl
ns-runtime-artifacts verify artifacts/frame-bundles/nightfall-mvp.jsonl \
    local/nightfall-mvp.jsonl
```

Both commands will fail with a non-zero exit code if any digests diverge.

## 3. Launch the Prototype Locally

Once the artifacts pass verification:

1. Install the package editable (`pip install -e .`) or run from source.
2. Load the exported frames in the viewer for spot checks:
   - `ns-mvp --duration 180 --tick 0.5`
   - `ns-viewer --duration 180 --playback 1.0`
3. Exercise the runtime harness against the exported bundle for confidence in
   downstream ingestion tooling:

```bash
ns-runtime-artifacts bundle --output native-runtime-local.zip --build-id qa-local
```

Share the freshly created bundle alongside the frame export when distributing to
external playtesters.

## 4. Record Handoff Metadata

For each drop, record the following in the QA tracker:

- Git commit SHA (from `BUILD_METADATA.json` or workflow summary).
- Frame bundle checksum (`nightfall-mvp.sha256`).
- Native archive checksum (output from `ns-runtime-artifacts checksum`).
- Verification operator initials and timestamp.

Capturing this metadata ensures every milestone build can be reproduced and
triaged quickly if regressions appear.
